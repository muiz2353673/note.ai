{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useSearchParams,useNavigate}from\"react-router-dom\";import{CheckCircleIcon,XCircleIcon}from\"@heroicons/react/24/outline\";import{authAPI}from\"../../services/api\";import toast from\"react-hot-toast\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerifyEmail=()=>{const[searchParams]=useSearchParams();const navigate=useNavigate();const[verificationStatus,setVerificationStatus]=useState(\"idle\");const[errorMessage,setErrorMessage]=useState(\"\");const token=searchParams.get(\"token\");useEffect(()=>{if(token){verifyEmail();}},[token]);const verifyEmail=async()=>{if(!token)return;setVerificationStatus(\"loading\");try{await authAPI.verifyEmail({token});setVerificationStatus(\"success\");toast.success(\"Email verified successfully!\");}catch(error){var _error$response,_error$response$data;setVerificationStatus(\"error\");setErrorMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||\"Email verification failed\");toast.error(\"Email verification failed\");}};const resendVerification=async()=>{try{await authAPI.resendVerification();toast.success(\"Verification email sent!\");}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||\"Failed to send verification email\");}};if(!token){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gradient\",children:\"Noted.AI\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-3xl font-bold text-gray-900\",children:\"Email Verification\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Invalid verification link\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(XCircleIcon,{className:\"mx-auto h-12 w-12 text-red-500\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-gray-900\",children:\"Invalid Verification Link\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"The verification link is invalid or has expired. Please check your email for a valid link or request a new one.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary w-full justify-center\",children:\"Go to Login\"})})]})})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gradient\",children:\"Noted.AI\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-3xl font-bold text-gray-900\",children:\"Email Verification\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Verifying your email address\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:[verificationStatus===\"loading\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-gray-900\",children:\"Verifying Email...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Please wait while we verify your email address.\"})]}),verificationStatus===\"success\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"mx-auto h-12 w-12 text-green-500\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-gray-900\",children:\"Email Verified Successfully!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Your email has been verified. You can now access all features of Noted.AI.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/dashboard\"),className:\"btn-primary w-full justify-center\",children:\"Go to Dashboard\"})})]}),verificationStatus===\"error\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(XCircleIcon,{className:\"mx-auto h-12 w-12 text-red-500\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-gray-900\",children:\"Verification Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:errorMessage||\"Email verification failed. Please try again.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:verifyEmail,className:\"btn-primary w-full justify-center\",children:\"Try Again\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resendVerification,className:\"btn-secondary w-full justify-center\",children:\"Resend Verification Email\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"block w-full text-center text-sm text-primary-600 hover:text-primary-500\",children:\"Back to Login\"})]})]})]})})]});};export default VerifyEmail;","map":{"version":3,"names":["React","useState","useEffect","Link","useSearchParams","useNavigate","CheckCircleIcon","XCircleIcon","authAPI","toast","jsx","_jsx","jsxs","_jsxs","VerifyEmail","searchParams","navigate","verificationStatus","setVerificationStatus","errorMessage","setErrorMessage","token","get","verifyEmail","success","error","_error$response","_error$response$data","response","data","resendVerification","_error$response2","_error$response2$data","className","children","to","onClick"],"sources":["/Users/muiz/Documents/GitHub/note.ai/client/src/pages/auth/VerifyEmail.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useSearchParams, useNavigate } from \"react-router-dom\";\nimport { CheckCircleIcon, XCircleIcon } from \"@heroicons/react/24/outline\";\nimport { authAPI } from \"../../services/api\";\nimport toast from \"react-hot-toast\";\n\nconst VerifyEmail: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const [verificationStatus, setVerificationStatus] = useState<\n    \"loading\" | \"success\" | \"error\" | \"idle\"\n  >(\"idle\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const token = searchParams.get(\"token\");\n\n  useEffect(() => {\n    if (token) {\n      verifyEmail();\n    }\n  }, [token]);\n\n  const verifyEmail = async () => {\n    if (!token) return;\n\n    setVerificationStatus(\"loading\");\n    try {\n      await authAPI.verifyEmail({ token });\n      setVerificationStatus(\"success\");\n      toast.success(\"Email verified successfully!\");\n    } catch (error: any) {\n      setVerificationStatus(\"error\");\n      setErrorMessage(\n        error.response?.data?.error || \"Email verification failed\"\n      );\n      toast.error(\"Email verification failed\");\n    }\n  };\n\n  const resendVerification = async () => {\n    try {\n      await authAPI.resendVerification();\n      toast.success(\"Verification email sent!\");\n    } catch (error: any) {\n      toast.error(\n        error.response?.data?.error || \"Failed to send verification email\"\n      );\n    }\n  };\n\n  if (!token) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n        <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gradient\">Noted.AI</h1>\n            <h2 className=\"mt-6 text-3xl font-bold text-gray-900\">\n              Email Verification\n            </h2>\n            <p className=\"mt-2 text-sm text-gray-600\">\n              Invalid verification link\n            </p>\n          </div>\n        </div>\n\n        <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n          <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n            <div className=\"text-center\">\n              <XCircleIcon className=\"mx-auto h-12 w-12 text-red-500\" />\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">\n                Invalid Verification Link\n              </h3>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                The verification link is invalid or has expired. Please check\n                your email for a valid link or request a new one.\n              </p>\n              <div className=\"mt-6\">\n                <Link to=\"/login\" className=\"btn-primary w-full justify-center\">\n                  Go to Login\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"text-center\">\n          <h1 className=\"text-3xl font-bold text-gradient\">Noted.AI</h1>\n          <h2 className=\"mt-6 text-3xl font-bold text-gray-900\">\n            Email Verification\n          </h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Verifying your email address\n          </p>\n        </div>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          {verificationStatus === \"loading\" && (\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">\n                Verifying Email...\n              </h3>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                Please wait while we verify your email address.\n              </p>\n            </div>\n          )}\n\n          {verificationStatus === \"success\" && (\n            <div className=\"text-center\">\n              <CheckCircleIcon className=\"mx-auto h-12 w-12 text-green-500\" />\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">\n                Email Verified Successfully!\n              </h3>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                Your email has been verified. You can now access all features of\n                Noted.AI.\n              </p>\n              <div className=\"mt-6\">\n                <button\n                  onClick={() => navigate(\"/dashboard\")}\n                  className=\"btn-primary w-full justify-center\"\n                >\n                  Go to Dashboard\n                </button>\n              </div>\n            </div>\n          )}\n\n          {verificationStatus === \"error\" && (\n            <div className=\"text-center\">\n              <XCircleIcon className=\"mx-auto h-12 w-12 text-red-500\" />\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">\n                Verification Failed\n              </h3>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                {errorMessage || \"Email verification failed. Please try again.\"}\n              </p>\n              <div className=\"mt-6 space-y-3\">\n                <button\n                  onClick={verifyEmail}\n                  className=\"btn-primary w-full justify-center\"\n                >\n                  Try Again\n                </button>\n                <button\n                  onClick={resendVerification}\n                  className=\"btn-secondary w-full justify-center\"\n                >\n                  Resend Verification Email\n                </button>\n                <Link\n                  to=\"/login\"\n                  className=\"block w-full text-center text-sm text-primary-600 hover:text-primary-500\"\n                >\n                  Back to Login\n                </Link>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VerifyEmail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}