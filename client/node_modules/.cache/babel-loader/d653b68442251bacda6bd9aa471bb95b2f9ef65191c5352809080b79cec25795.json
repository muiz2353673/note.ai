{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{BellIcon,CheckIcon,XMarkIcon}from\"@heroicons/react/24/outline\";import{useNotifications}from\"../contexts/NotificationContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationDropdown=()=>{const{notifications,unreadCount,markAsRead,markAllAsRead,removeNotification}=useNotifications();const[isOpen,setIsOpen]=useState(false);const dropdownRef=useRef(null);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);const formatTime=timestamp=>{const now=new Date();const diff=now.getTime()-timestamp.getTime();const minutes=Math.floor(diff/60000);const hours=Math.floor(diff/3600000);const days=Math.floor(diff/86400000);if(minutes<1)return\"Just now\";if(minutes<60)return`${minutes}m ago`;if(hours<24)return`${hours}h ago`;return`${days}d ago`;};const getNotificationIcon=type=>{switch(type){case\"success\":return\"‚úÖ\";case\"error\":return\"‚ùå\";case\"warning\":return\"‚ö†Ô∏è\";case\"info\":return\"‚ÑπÔ∏è\";default:return\"üì¢\";}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsOpen(!isOpen),className:\"relative p-2 text-gray-400 hover:text-gray-600 transition-colors\",children:[/*#__PURE__*/_jsx(BellIcon,{className:\"w-6 h-6\"}),unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 bg-error-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\",children:unreadCount>99?\"99+\":unreadCount})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Notifications\"}),unreadCount>0&&/*#__PURE__*/_jsx(\"button\",{onClick:markAllAsRead,className:\"text-sm text-primary-600 hover:text-primary-700\",children:\"Mark all as read\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto\",children:notifications.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(BellIcon,{className:\"w-8 h-8 mx-auto mb-2 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No notifications yet\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:notifications.slice(0,10).map(notification=>/*#__PURE__*/_jsx(\"div\",{className:`p-4 hover:bg-gray-50 transition-colors ${!notification.read?\"bg-blue-50\":\"\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:getNotificationIcon(notification.type)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:notification.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[!notification.read&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>markAsRead(notification.id),className:\"text-primary-600 hover:text-primary-700\",children:/*#__PURE__*/_jsx(CheckIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeNotification(notification.id),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:notification.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:formatTime(notification.timestamp)}),notification.action&&/*#__PURE__*/_jsx(\"a\",{href:notification.action.url,className:\"text-xs text-primary-600 hover:text-primary-700\",children:notification.action.label})]})]})]})},notification.id))})}),notifications.length>10&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200 text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-sm text-primary-600 hover:text-primary-700\",children:\"View all notifications\"})})]})]});};export default NotificationDropdown;","map":{"version":3,"names":["React","useState","useRef","useEffect","BellIcon","CheckIcon","XMarkIcon","useNotifications","jsx","_jsx","jsxs","_jsxs","NotificationDropdown","notifications","unreadCount","markAsRead","markAllAsRead","removeNotification","isOpen","setIsOpen","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","formatTime","timestamp","now","Date","diff","getTime","minutes","Math","floor","hours","days","getNotificationIcon","type","className","ref","children","onClick","length","slice","map","notification","read","title","id","message","action","href","url","label"],"sources":["/Users/muiz/Documents/GitHub/note.ai/client/src/components/NotificationDropdown.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { BellIcon, CheckIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { useNotifications } from \"../contexts/NotificationContext\";\n\nconst NotificationDropdown: React.FC = () => {\n  const {\n    notifications,\n    unreadCount,\n    markAsRead,\n    markAllAsRead,\n    removeNotification,\n  } = useNotifications();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const formatTime = (timestamp: Date) => {\n    const now = new Date();\n    const diff = now.getTime() - timestamp.getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return \"Just now\";\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    return `${days}d ago`;\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case \"success\":\n        return \"‚úÖ\";\n      case \"error\":\n        return \"‚ùå\";\n      case \"warning\":\n        return \"‚ö†Ô∏è\";\n      case \"info\":\n        return \"‚ÑπÔ∏è\";\n      default:\n        return \"üì¢\";\n    }\n  };\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      {/* Notification Bell */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"relative p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n      >\n        <BellIcon className=\"w-6 h-6\" />\n        {unreadCount > 0 && (\n          <span className=\"absolute -top-1 -right-1 bg-error-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n            {unreadCount > 99 ? \"99+\" : unreadCount}\n          </span>\n        )}\n      </button>\n\n      {/* Dropdown */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n          <div className=\"p-4 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                Notifications\n              </h3>\n              {unreadCount > 0 && (\n                <button\n                  onClick={markAllAsRead}\n                  className=\"text-sm text-primary-600 hover:text-primary-700\"\n                >\n                  Mark all as read\n                </button>\n              )}\n            </div>\n          </div>\n\n          <div className=\"max-h-96 overflow-y-auto\">\n            {notifications.length === 0 ? (\n              <div className=\"p-4 text-center text-gray-500\">\n                <BellIcon className=\"w-8 h-8 mx-auto mb-2 text-gray-300\" />\n                <p>No notifications yet</p>\n              </div>\n            ) : (\n              <div className=\"divide-y divide-gray-200\">\n                {notifications.slice(0, 10).map((notification) => (\n                  <div\n                    key={notification.id}\n                    className={`p-4 hover:bg-gray-50 transition-colors ${\n                      !notification.read ? \"bg-blue-50\" : \"\"\n                    }`}\n                  >\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"flex-shrink-0\">\n                        <span className=\"text-lg\">\n                          {getNotificationIcon(notification.type)}\n                        </span>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center justify-between\">\n                          <p className=\"text-sm font-medium text-gray-900\">\n                            {notification.title}\n                          </p>\n                          <div className=\"flex items-center space-x-2\">\n                            {!notification.read && (\n                              <button\n                                onClick={() => markAsRead(notification.id)}\n                                className=\"text-primary-600 hover:text-primary-700\"\n                              >\n                                <CheckIcon className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                            <button\n                              onClick={() =>\n                                removeNotification(notification.id)\n                              }\n                              className=\"text-gray-400 hover:text-gray-600\"\n                            >\n                              <XMarkIcon className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          {notification.message}\n                        </p>\n                        <div className=\"flex items-center justify-between mt-2\">\n                          <span className=\"text-xs text-gray-400\">\n                            {formatTime(notification.timestamp)}\n                          </span>\n                          {notification.action && (\n                            <a\n                              href={notification.action.url}\n                              className=\"text-xs text-primary-600 hover:text-primary-700\"\n                            >\n                              {notification.action.label}\n                            </a>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {notifications.length > 10 && (\n            <div className=\"p-4 border-t border-gray-200 text-center\">\n              <button className=\"text-sm text-primary-600 hover:text-primary-700\">\n                View all notifications\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NotificationDropdown;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}